{"note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Adapter-mongo","body":"# adapter-mongo\r\n\r\nMongo adapter for adapter gem.\r\n\r\n```ruby\r\nrequire 'adapter/mongo'\r\n\r\nkey     = BSON::ObjectId.new\r\nclient  = Mongo::MongoClient.new.db('adapter')['testing']\r\nadapter = Adapter[:mongo].new(client)\r\nadapter.clear\r\n\r\nadapter.write(key, {'some' => 'thing'})\r\nputs 'Should be {\"some\" => \"thing\"}: ' + adapter.read(key).inspect\r\n\r\nadapter.delete(key)\r\nputs 'Should be nil: ' + adapter.read(key).inspect\r\n\r\nadapter.write(key, {'some' => 'thing'})\r\nadapter.clear\r\nputs 'Should be nil: ' + adapter.read(key).inspect\r\n\r\nputs 'Should be {\"some\" => \"thing\"}: ' + adapter.fetch(key, {'some' => 'thing'}).inspect\r\n```\r\n\r\n## Flavors\r\n\r\nThere are two adapters included with this gem -- `:mongo` and `:mongo_atomic`. `:mongo` assumes that you are writing the full document each time. `:mongo_atomic` allows for partially updating documents. The difference is best shown with a bit of code.\r\n\r\n```ruby\r\nrequire 'adapter/mongo_atomic'\r\n\r\nkey            = BSON::ObjectId.new\r\nfull_doc       = {'a' => 'c', 'b' => 'd'}\r\npartial_doc    = {'a' => 'z'}\r\nclient         = Mongo::MongoClient.new.db('adapter')['testing']\r\nadapter        = Adapter[:mongo].new(client)\r\natomic_adapter = Adapter[:mongo_atomic].new(client)\r\n\r\nadapter.clear\r\natomic_adapter.clear\r\n\r\nadapter.write(key, full_doc)\r\nadapter.write(key, partial_doc)\r\n\r\ndoc = adapter.read(key)\r\ndoc.delete('_id')\r\n\r\n# full doc must always be written with :mongo adapter\r\nputs 'Should be {\"a\"=>\"z\"}: ' + doc.inspect\r\n\r\natomic_adapter.write(key, full_doc)\r\natomic_adapter.write(key, partial_doc)\r\n\r\ndoc = atomic_adapter.read(key)\r\ndoc.delete('_id')\r\n\r\n# partial updates can be written with atomic adapter as $set is used\r\nputs 'Should be {\"a\"=>\"z\", \"b\"=>\"d\"}: ' + doc.inspect\r\n```\r\n\r\nSee examples/ or specs/ for more usage.\r\n\r\n## Contributing\r\n\r\n* Fork the project.\r\n* Make your feature addition or bug fix.\r\n* Add tests for it. This is important so we don't break it in a future version unintentionally.\r\n* Commit, do not mess with rakefile, version, or history. (if you want to have your own version, that is fine, but bump version in a commit by itself so we can ignore when we pull)\r\n* Send us a pull request. Bonus points for topic branches.\r\n","google":"","tagline":"Adapter for mongo"}